<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<head>
    <title>选择地址</title>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" >
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body >
	<ul class="address_list" id='content_body'>
	</ul>
	<ul id='add_address' class="add_address" style="margin-bottom: 30px;">
		<li >
			<div class="similar_data_detail" style="margin-left:30px;margin-bottom: 30px;">	
				<p class="store-item-addr4">
					新增地址
				</p>
			</div>
			<span class="add_icon3"><img src="img/add.png"/></span>	
			<span class="address_icon glyphicon glyphicon-chevron-right" aria-hidden="true"></span>	
		</li>
	</ul>
	
	<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/pub_fuc.js"></script> 
<script type="text/javascript">
var openId = '45234';
$(function(){
	load();
	
});

function load(){
	nativeAjax('get','api/user/getAll?openId='+openId,function(e){
		var data = jsonParse(getResult(e));
		var arr = data.data;
		//console.log(arr);
		var html = '';
		for(var i=0,len=arr.length;i<len;i++){
			var obj = arr[i];
			
			html +='<li id='+obj.id+' >'
				+'<div class="similar_data_detail" >'
				+'<p class="store-item-addr4">'
				+obj.name
				+'</p>'
				+'</div>'
				+'<div class="similar_data_detail">'
				+'<p class="store-item-addr3">'
				+obj.address
				+'</p>'
				+'</div>'
				+'<span class="add_icon glyphicon glyphicon-ok" style="color:#3E95DA;" aria-hidden="true" ></span>'
				+'<span class="edit_icon" >'
				+'<span class="glyphicon glyphicon-edit" style="color:#3E95DA;"></span>&nbsp;&nbsp;&nbsp;&nbsp;'
				+'<span class="glyphicon glyphicon-remove" style="color:#3E95DA;"></span>'
				+'</span>'
				+'</li>';
			
		}
		document.getElementById('content_body').innerHTML = html;
		show_detail();
	});
}

function show_detail(){
	  $('#content_body').on('click','li',function(e){
		//filter phone
		var tid = e.currentTarget.id;
		if(e.target.className=='glyphicon glyphicon-edit'){
			window.location.href ='edit_address.html?tid='+tid;
		} 
		
		if(e.target.className=='glyphicon glyphicon-remove'){
			nativeAjax('get','api/user/delAddress?addressId='+tid,function(e1){
				var data = jsonParse(getResult(e1));
				if(data.code=='0'){
					console.log(e.currentTarget);
					e.currentTarget.outerHTML = '';
				}
			});
		}
		
	}); 
	  
	  
	 $("#add_address").click(function(){
		 window.location.href ='add_address.html?openId='+openId;
	 });
}
	</script>
	
</body>
</html>
