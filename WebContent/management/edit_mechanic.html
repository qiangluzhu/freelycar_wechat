<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->
<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->
<head>
    <title>小易爱车后台管理系统</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" >
    <link href="css/foundation-5.5.3.min.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
</head>
<body>
  <div class="wrap">
    <div class="header"></div>
    <div class="container">
      <nav class="topNav">
        <div class="right">
          <div class="user_avatar" data-dropdown="hover" data-options="is_hover:true; ">
            <img src="https://pic1-s.styd.cn/no-avatar?imageView2/1/w/100/h/100/interlace/1" alt="">
          </div>
          <ul id="hover" class="f-dropdown" data-dropdown-content>
            <li>
              <a href="">退出</a>
            </li>
          </ul>
        </div>
      </nav>
      <div class="template">
        <div class="breadCrumb">
          <div class="titles left">
            <h3>编辑技师</h3>
            <p class="page_breadcrumbs">
              <a href="index.html">首页</a>
              <i class="fa fa-fw">/</i>
              <a href="mechanic.html">技师管理</a>
              <i class="fa fa-fw">/</i>
              <span>编辑技师</span>
            </p>
          </div>
        </div>
        <div class="mainContent shop_set">
          <div class="row">
            <div class="large-12 columns pd-0">
              <div class="cus_form">
                <div class="data_title">
                  <b>编辑技师</b>
                </div>
                <div class="large-8 columns">
                  <div class="row">
                    <div class="large-3 columns">
                      <label class="right inline">
                        <b class="t-color red">*</b>姓名：
                      </label>
                    </div>
                    <div class="large-8 end columns">
                      <input type="text" class="radius" id="name" placeholder="请输入姓名" value="">
                    </div>
                  </div>
                  <div class="row">
                    <div class="large-3 columns">
                      <label class="right inline">
                        <b class="t-color red">*</b>手机号：
                      </label>
                    </div>
                    <div class="large-8 end columns">
                      <input type="text" class="radius" id="phone" placeholder="请输入手机号" value="">
                    </div>
                  </div>
                  <div class="row">
                    <div class="large-3 columns">
                      <label class="right inline">
                        <b class="t-color red">*</b>密码：
                      </label>
                    </div>
                    <div class="large-8 end columns">
                      <input type="password" class="radius" id="password" placeholder="请输入密码" value="">
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="large-12 text-center columns">
                  <a href="mechanic.html" class="button ran radius back" style="background-color:#fff; color:#2096f3">返回</a>
                  <a id='edit' class="button ran radius save">修改</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
   <script src="../js/jquery-1.11.3.min.js"></script>
  <script src="../js/pub_fuc.js"></script>
  <script src="js/tether.min.js"></script>
  <script src="js/jquery.components.min.js"></script>
  <script src="js/foundation.min.js"></script>
  <script src="js/public.js"></script>
  <script src="js/common.js"></script>
    <script>
      $(function() {
         $("div.header").load("public.html");
         $("#barfile").change(function(){
 		    readURL(this);
 		});
      });
      
        var id = get_param('tid');
		nativeAjax('get','../api/technician/getById?id='+id,function(e){
			var data = jsonParse(getResult(e));
			//console.log(data);
			var code = data.code;
			if(code=='0'){
				var obj = data.data;
				var name = document.getElementById('name');
				name.value = obj.name;
				
				var phone = document.getElementById('phone');
				phone.value = obj.phone;
				
				var password = document.getElementById('password');
				password.value = obj.password;
				
				edit();
			}
			
		});
		
		function edit(){
			$('#edit').click(function(){
				var name = document.getElementById('name').value;
				var phone = document.getElementById('phone').value;
				var password = document.getElementById('password').value;
				
				if(isEmpty(name) || isEmpty(phone) || isEmpty(password)){
					return false;
				}
				if(phone.length!=11){
					alert("请填写正确的手机号码");
					return false;
				}
				
				var param = {'id':id,'phone':phone,'password':password,'name':name};
				
				nativeAjax('post','../api/technician/modify',function(e){
					var data = jsonParse(getResult(e));
					//console.log(data);
					if(data.code=='0'){
						window.location.href ='mechanic.html';
					}
				},$.param(param));
                return false;
			});
		}
		
      
    </script>
</body>
</html>
